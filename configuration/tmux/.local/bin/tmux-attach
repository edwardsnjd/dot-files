#!/usr/bin/env bash

# Usage: tmux-attach [query]
#
# Fuzzy select an available tmux session then attach or
# switch to selected session.

set -o nounset
set -o errexit

function Main() {
  tmux-join "$(ChooseSession "$@")"
}

function ChooseSession() {
  local query="${1:-}"

  tmux ls -F "ðŸŸ¢ #{session_name}" 2> /dev/null \
    | sort --ignore-case \
    | fzf --query="$query" \
    | cut -c3-
 }

Main "$@"
